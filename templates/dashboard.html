{% extends "base.html" %}
{% block content %}
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:20px;">
        <h2 style="margin:0;">Dashboard</h2>
    </div>

    <!-- Create Event Form (Same as before) -->
    <div class="card">
        <h3 class="card-title">Create New Event</h3>
        <form action="{{ url_for('create_event') }}" method="POST" style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
            <div style="grid-column: span 2;">
                <input type="text" name="title" placeholder="Event Title" required>
            </div>
            <div>
                <input type="date" name="date" required>
            </div>
            <div>
                <input type="text" name="description" placeholder="Short description...">
            </div>
            <div style="grid-column: span 2;">
                <button type="submit" style="width:100%">+ Create Event</button>
            </div>
        </form>
    </div>

    <h3 style="margin-top: 40px; border-bottom: 1px solid var(--border); padding-bottom:10px;">Upcoming Events</h3>
    
    <div class="grid">
        {% if events %}
            {% for event in events %}
            <div class="card" style="display:flex; flex-direction:column; justify-content:space-between;">
                <div>
                    <div style="display:flex; justify-content:space-between;">
                        <span class="event-date">{{ event.date }}</span>
                        <div class="actions">
                            <a href="{{ url_for('edit_event', event_id=event.id) }}" class="btn-edit">Edit</a>
                            <a href="{{ url_for('delete_event', event_id=event.id) }}" class="btn-danger" onclick="return confirm('Delete this event? All attendees will be lost.')">Del</a>
                        </div>
                    </div>
                    <h3 style="margin: 0 0 10px 0;">{{ event.title }}</h3>
                    <p style="color: var(--text-muted); font-size: 0.9rem;">{{ event.description }}</p>
                </div>
                <div style="margin-top:15px; padding-top:15px; border-top:1px solid var(--border);">
                    <a href="{{ url_for('event_detail', event_id=event.id) }}" class="btn" style="width:100%; text-align:center; box-sizing:border-box;">Manage Attendees</a>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <p style="color:var(--text-muted)">No events found.</p>
        {% endif %}
    </div>
{% endblock %}